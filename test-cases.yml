---
- summary: |
    Регистрация с валидными данными
  requirement: |
    Система должна позволять пользователю регистрироваться при вводе корректных данных
  prerequisites: |
    Пользователь не зарегистрирован в системе
  test-data: |
    нет
  steps:
    - открыть страницу регистрации (нажать Sign Up)
    - ввести имя пользователя 
    - ввести email 
    - ввести пароль 
    - ввести пароль заново в поле подтверждения 
    - нажать кнопку "Submit"
  expected-result: |
    Пользователь успешно зарегистрирован и перенаправлен на главную страницу

- summary: |
    Регистрация с пустыми полями
  requirement: |
    Система должна выдавать ошибку при попытке регистрации с пустыми полями
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - открыть страницу регистрации (нажать Sign Up)
    - оставить поля все пустыми
    - нажать кнопку "Submit"
  expected-result: |
    Пользователь не зарегистрирован и видит ошибку

- summary: |
    Регистрация с невалидным email
  requirement: |
    Система должна проверять валидность email-адреса при регистрации
  prerequisites: |
    нет
  test-data: |
    Email: invalid_email
    Пароль: ValidPassword123
    Имя пользователя: Valid
  steps:
    - открыть страницу регистрации (нажать Sign Up)
    - ввести имя пользователя 
    - ввести email 
    - ввести пароль 
    - ввести пароль заново в поле подтверждения 
    - нажать кнопку "Submit"
  expected-result: |
    Пользователь не зарегистрирован и видит ошибку

- summary: |
    Регистрация с уже существующим email
  requirement: |
    Система должна предотвращать регистрацию с email, который уже используется
  prerequisites: |
    Пользователь с email "existing_user@example.com" зарегистрирован в системе
  test-data: |
    Email: existing_user@example.com
    Пароль: PasswordValid123
    Имя пользователя: Valid
  steps:
    - открыть страницу регистрации (нажать Sign Up)
    - ввести имя пользователя 
    - ввести email 
    - ввести пароль 
    - ввести пароль заново в поле подтверждения 
    - нажать кнопку "Submit"
  expected-result: |
    Пользователь не зарегистрирован и видит ошибку

- summary: |
    Регистрация с уже существующим никнеймом
  requirement: |
    Система должна предотвращать регистрацию с никнеймом, который уже используется
  prerequisites: |
    Пользователь с никнеймом "Valid" зарегистрирован в системе
  test-data: |
    Имя пользователя: Valid
    Email: new_user@example.com
    Пароль: ValidPassword123
  steps:
    - открыть страницу регистрации (нажать Sign Up)
    - ввести имя пользователя 
    - ввести email 
    - ввести пароль 
    - ввести пароль заново в поле подтверждения 
    - нажать кнопку "Submit"
  expected-result: |
    Пользователь не зарегистрирован и видит ошибку

- summary: |
    Авторизация с валидными данными
  requirement: |
    Система должна позволять пользователю входить в систему с корректными учетными данными
  prerequisites: |
    Пользователь зарегистрирован в системе
  test-data: |
    Email: valid_user@example.com
    Пароль: ValidPassword123
  steps:
    - открыть страницу входа (нажать Sign In)
    - Ввести email 
    - Ввести пароль 
    - нажать кнопку "Submit"
  expected-result: |
    Пользователь успешно авторизован и перенаправлен на главную страницу

- summary: |
    Авторизация с неверным паролем
  requirement: |
    Система должна предотвращать авторизацию с некорректным паролем
  prerequisites: |
    Пользователь зарегистрирован в системе
  test-data: |
    Email: valid_user@example.com
    Пароль: InvalidPassword
  steps:
    - открыть страницу входа (нажать Sign In)
    - ввести email 
    - ввести пароль 
    - нажать кнопку "Submit"
  expected-result: |
    Система отображает сообщение об ошибке: "INVALID_PASSWORD"

- summary: |
    Авторизация с несуществующим email
  requirement: |
    Система должна предотвращать авторизацию с несуществующим email
  prerequisites: |
    Нет пользователя с email 'nonexistent_user@example.com'
  test-data: |
    Email: nonexistent_user@example.com
    Пароль: ValidPassword123
  steps:
    - открыть страницу входа (нажать Sign In)
    - ввести email 
    - ввести пароль 
    - нажать кнопку "Submit"
  expected-result: |
    Система отображает сообщение об ошибке: "EMAIL_NOT_FOUND"

- summary: |
    Проверка восстановления пароля
  requirement: |
    Система должна позволять пользователям восстанавливать пароль 
  prerequisites: |
    Пользователь зарегистрирован в системе
  test-data: |
    Email: valid_user@example.com
  steps:
    - открыть страницу входа (нажать Sign In)
    - нажать на ссылку "Forgot your password?"
    - ввести email 
    - нажать кнопку "Submit"
    - выполнить инструкцию по восстановлению пароля на почте
    - авторизироваться с новым паролем
  expected-result: |
    Пользователь успешно авторизован

- summary: | 
    Проверка авторизации через аккаунт GitHub
  requirement: |
    Пользователь может авторизоваться через аккаунт GitHub
  prerequisites: |
    Пользователь вошел в свой аккаунт на ГитХаб
  test-data: |
    нет
  steps:
    - открыть страницу входа (нажать Sign In)
    - нажать на кнопку "Sign in with Github"
  expected-result: |
   Пользователь успешно авторизован через Гитхаб

- summary: | 
    Проверка авторизации через аккаунт Discord
  requirement: |
    Пользователь может авторизоваться через аккаунт Discord
  prerequisites: |
    Пользователь вошел в свой аккаунт на Discord
  test-data: |
    нет
  steps:
    - открыть страницу входа (нажать Sign In)
    - нажать на кнопку "Sign in with Discord"
  expected-result: |
    Пользователь успешно авторизован через Discord

- summary: |
    Создание игры с ботом без регистрации
  requirement: |
    Система должна позволять пользователям создавать игру с ботом без регистрации
  prerequisites: |
    Пользователь не авторизован в системе
  test-data: |
    нет
  steps:
    - нажать кнопку "Try simple battle"
  expected-result: |
    Игра успешно создана

- summary: | 
    Создание игры авторизированного пользователя с ботом 
  requirement: |
    Пользователь имеет возможность создать игру с ботом
  prerequisites: |
    Пользователь авторизован
  test-data: |
    нет
  steps:
    - нажать кнопку "Create game"
    - в типе игры выбрать "with bot"
    - нажать "Create battle"
  expected-result: |
    Игра создана

- summary: | 
    Создание игры пользователя с другом
  requirement: |
    Пользователь имеет возможность создать игру с другом
  prerequisites: |
    нет
  test-data: |
    Данные для пользователя два:
    email: sansan@mail.ru
    password: Sansan0
  steps:
    - нажать кнопку "Create game"
    - в типе игры выбрать "with friend"
    - выбрать пользователя два
    - нажать "Create battle"
    - нажать на "приглашения" Пользователем два 
    - принять приглашение Пользователем два
  expected-result: |
    Игра с другом успешно создана

- summary: | 
    Создание игры пользователя с другими пользователями 
  requirement: |
    Пользователь имеет возможность создать игру с другими пользовотелями 
  prerequisites: |
    нет
  test-data: |
    Данные для пользователя два:
    email: sansan@mail.ru
    password: Sansan0
  steps:
    - нажать кнопку "Create game"
    - в типе игры выбрать "with oteher users"
    - нажать "Create battle"
    - найти созданную игру в лобби Пользователем два
    - присоединиться к игре(Fight)
  expected-result: |
    Игра с другим пользователем успешно создана

- summary: | 
    Создание игры с крайними значениями времени 
  requirement: |
    Пользователь имеет возможность создать игру с крайними значениями времени 
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - нажать кнопку "Create game"
    - выбрать 3 минуты
    - нажать "Create battle"
    - повторить с 60 минутами
  expected-result: |
    Игра создана

- summary: | 
    Создание игры с выбранным уровнем сложности
  requirement: |
    При создании игры пользователь может выбрать любой уровень сложности
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - нажать кнопку "Create game"
    - выбрать уровень сложности игры
    - нажать "Create battle"
  expected-result: |
    Пользователю отображается игра с выбранным уровнем сложности

- summary: | 
    Проверка возможности фильтрации заданий по тегу 
  requirement: |
    Пользователь имеет возможность фильтровать задания по тегу при создании игры
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - нажать кнопку "Create game"
    - выбрать тег
    - нажать "Create battle"
  expected-result: |
    Пользователю отображается количество доступных заданий с выбранным тегом

- summary: |
    Проверка отображения текста задания на разных языках
  requirement: |
    Текст задания должен отображаться корректно на обоих языках
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - создать игру с помощью кнопки "Create game"
    - поменять язык в выпадающем списке в окне задания 
    - повторить действие
  expected-result: |
    Текст задания отображается корректно на выбранном языке

- summary: |
    Проверка развернутого отображения текста задания 
  requirement: |
    При нажатии на элемент должна отображаться страница с текстом задания
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - создать игру с помощью кнопки "Create game"
    - нажать на кнопку "Expand"
  expected-result: |
    Отображается страница с текстом задания

- summary: |
    Проверка открытия инструкции в активной игре
  requirement: |
    При нажатии на элемент должна отображаться страница с инструкцией
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - создать игру с помощью кнопки "Create game"
    - нажать на кнопку "Show guide"
    - проверить работу всех кнопок на этой странице
  expected-result: |
    Отображается страница с инструкцией

- summary: |
    Проверка работы таймера
  requirement: |
    Таймер должен верно отсчитывать время
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
   - создать игру с помощью кнопки "Create game"
   - нажимать на разные элементы страницы и следить за верной работой таймера
  expected-result: |
    Таймер верно работает

- summary: |
    Проверка возможности выбора языка программирования
  requirement: |
    У пользователя должна быть возможность сменить язык программирования
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
   - создать игру с помощью кнопки "Create game"
   - открыть выпадающий список с языками 
   - выбрать первый
   - проверить изменения в окне кода
   - повторить действие с остальными языками
  expected-result: |
    Есть возможность выбрать язык программирования

- summary: |
    Проверка возможности смены темы 
  requirement: |
    При смене темы цветовая гамма должна меняться на соответствующую
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
   - создать игру с помощью кнопки "Create game"
   - выбрать другую тему в окне кода
   - повторить действие
  expected-result: |
    Цветовая гамма меняется в соответвии с выбранной темой

- summary: |
    Проверка запуска кода 
  requirement: |
    При запуске кода результат должен отображаться в output
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
   - создать игру с помощью кнопки "Create game"
   - нажать кнопку "Run"
  expected-result: |
    Открылось окно "Output"

- summary: |
    Проверка возможности сброса изменений в коде 
  requirement: |
    У пользователя должна быть возможность отменить все изменения
  prerequisites: |
    Игра создана
  test-data: |
    нет
  steps:
   - создать игру с помощью кнопки "Create game"
   - написать что-то на странице кода
   - нажать три точки на странице кода
   - нажать "Reset Solution"
  expected-result: |
    Все изменения сброшены

- summary: |
    Проверка работы личного чата
  requirement: |
    В игре пользователь имеет возможность писать в чат
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - создать игру с помощью кнопки "Create game"
    - написать любое сообщение в поле чата
  expected-result: |
    Сообщение отправилось в чат

- summary: |
    Проверка возможности вернуться на главную страницу со страницы игры
  requirement: |
    У пользователя должна быть возможность вернуться на главную страницу
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - создать игру с помощью кнопки "Create game"
    - нажать "Back to home"
  expected-result: |
    Открылась главная страница

- summary: |
    Проверка возможности сдаться
  requirement: |
    У пользователя должна быть возможность сдаться
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - создать игру с помощью кнопки "Create game"
    - нажать три точка в окне крода
    - нажать "give up"
  expected-result: |
    Игра окончена, открылось окно с уведомлением о проигрыше с звуком

- summary: | 
    Проверка получения уведомления о победе пользователя на странице игры с звуком после выигрыша 
  requirement: |
    В случае выигрыша пользователь получает уведомление о выигрыше
  prerequisites: |
    нет
  test-data: |
    Task solution:
    const _ = require("lodash");
    const R = require("rambda");
    const solution = (width, length) => {
      return width * length;
    };
    module.exports = solution;
  steps:
    - создать игру с помощью кнопки "Create game"
    - выбрать задачу "rect_area"
    - нажать кнопку "Create battle"
    - выбрать язык NodeJS
    - вставить код
    - нажать на кнопку "Run"
  expected-result: |
    Появилось уведомление о победе и воспроизвелся звук
   
- summary: |
    Проверка редактирования никнейма
  requirement: |
    Пользователь имеет возможность редактировать свой никнейм
  prerequisites: |
    Никнейм должен быть уникальным
  test-data: |
    Новый никнейм: valid2
  steps:
    - нажать на кнопку вызова навигационного меню
    - нажать на пункт меню "Settings"
    - нвести в поле ввода "Your name" новый никнейм
    - нажать "SAVE"
  expected-result: |
     Никнейм успешно изменен

- summary: |
    Проверка отсутствия авторизации у пользователя, который вышел из аккаунта
  requirement: |
    Пользователь должен иметь возможность выйти из аккаунта
  prerequisites: |
    Пользователь авторизован
  test-data: |
    нет
  steps:
    - нажать на кнопку вызова навигационного меню
    - нажать на пункт меню "Sign Out"
  expected-result: |
    Пользователь не авторизован и находится на главной странице

- summary: | 
    Проверка функциональности отправки публичного сообщения в общий чат на главной странице
  requirement: |
    Пользователь может отправить видимое всем пользователям сообщение в чате на главной странице
  prerequisites: |
    Открыта главная страница с вкладкой чата "General"
  test-data: |
    Онет
  steps:
    - ввести в поле ввода чата сообщение "Hi!"
    - yажать на кнопку "Send"
  expected-result: |
    Сообщение, введенное пользователем, отображается в чате

- summary: | 
    Проверка отправки личного сообщения
  requirement: |
    Пользователь может отправить личное сообщение другому пользователю в чате на главной странице
  prerequisites: |
    Пользователи авторизованы. Открыта главная страница Пользователя 1 с вкладкой чата "General". 
  test-data: |
    Данные для пользователя два:
    email: sansan@mail.ru
    password: Sansan0
  steps:
    - нажать на имя пользователя два в списке пользователей, которые онлайн
    - выбрать "Direct message" 
    - ввести в поле ввода чата сообщение "Hi!"
    - yажать на кнопку "Send" 
  expected-result: |
    Сообщение отправлено и отображается у Пользователя два

- summary: | 
    Тестирование отображения уведомлений в чате на главной странице
  requirement: |
    Пользователь может просматривать уведомления в чате на главной странице
  prerequisites: |
    Открыта главная страница с вкладкой чата "General"
  test-data: |
    нет
  steps:
    - нажать на имя пользователя в списке пользователей, которые онлайн
    - выбрать "Direct message"
    - ввести в поле ввода чата сообщение
    - нажать на кнопку "Send"
    - выбрать вкладку чата "Notification"
  expected-result: |
    Пользователю не отображается сообщение от пользователей, однако отображается уведомление

- summary: |
    Проверка возможности присоединиться к турниру
  requirement: |
    Игрок имеет возможность присоединиться к уже созданному турниру
  prerequisites: |
    Открыта вкладка "Tournaments"
  test-data: |
    нет
  steps:
    - нажать 'Show' напротив турнира 
    - нажать 'Join'
  expected-result: |
    Никейм пользователя появился в списке игроков выбранного турнира

- summary: |
    Проверка успешного создания турнира
  requirement: |
    Игрок имеет возможность создать турнир
  prerequisites: |
    Открыта вкладка 'Tournaments'
  test-data: |
    нет
  steps:
    - нажать на 'Tournaments info'
    - заполнить форму 'Create a new tournament' 
    - указать вреям и дату следующего дня
    - нажать 'Create'
  expected-result: |
    Турнир появился в списке турниров

- summary: |
    Проверка поиска в рейтинге игроков
  requirement: |
    Пользователь имеет возможность производить поиск по имени в рейтинге игроков
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - нажать на гиперссылку Toplist
    - в поле поиска ввести "valid"
  expected-result: |
    Отобразился введенный пользователь

- summary: |
    Проверка перехода с сайта в мессенджер Telegram
  requirement: |
    Пользователь может переместиться с сайта в Telegram
  prerequisites: 
    Пользователь авторизован в мессенджере Telegram
  test-data: |
    нет
  steps:
    - нажать на кнопку вызова навигационного меню
    - нажать "Tg#codebattle" 
  expected-result: |
    Происходит переход в приложение Telegram в чат "Codebattle"

- summary: |
    Проверка чатов на защиту от XSS атак
  requirement: |
    При попытке отправить код на сайте не должно ничего произойти
  prerequisites: 
    нет
  test-data: |
    <script>alert('Я отправил вам скрипт! Пришлите денег, пожалуйста :(')</script>
  steps:
    - отправить код в общий чат
    - открыть чат с любым пользователем
    - отправить код в личный чат другого пользователя
    - создать игру с помощью кнопки "Create game"
    - отправить код в чат в созданной игре
  expected-result: |
    Код отправляется в таком же виде, и на сайте ничего не происходит 

- summary: |
    Проверка просмотря списка задач
  requirement: |
    Пользователь может просматривать список задач
  prerequisites: 
    нет
  test-data: |
    нет
  steps:
    - нажать на кнопку вызова навигационного меню
    - выбрать "tasks"
  expected-result: |
    Открылся список задач

- summary: |
    Проверка возможности создания задач
  requirement: |
    Пользователь может создавать задачи
  prerequisites: 
    нет
  test-data: |
    нет
  steps:
    - нажать на кнопку вызова навигационного меню
    - выбрать "tasks"
    - нажать "Create task"
  expected-result: |
    Задача создана

- summary: |
    Проверка адаптивности сайта на телефоне
  requirement: |
    Сайт должен хорошо открываться
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - открыть DevTools
    - выбрать среди гаджетов в DevTools - Iphone 12 Pro
  expected-result: |
    Сайт хорошо адаптируется

- summary: |
    Проверка адаптивности сайта на планшете
  requirement: |
    Сайт должен хорошо открываться
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - открыть DevTools
    - выбрать среди гаджетов в DevTools - iPad Air
  expected-result: |
    Сайт хорошо адаптируется

- summary: |
    Проверка кроссбраузерности 
  requirement: |
    Сайт должен хорошо открываться на всех браузерах
  prerequisites: |
    Открыть браузеры Chrome, Firefox, Safari
  test-data: |
    Ссылка на сайт https://codebattle.hexlet.io
  steps:
    - открыть ссылку в браузерах
  expected-result: |
    Сайт корректно отрабатывает

- summary: |
    Проверка функции отслеживания активности другого пользователя
  requirement: |
    Пользователь может отслеживать активность другого пользователя
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - в списке пользователей, которые находятся онлайн, нажать на любого пользователя 
    - в выпадающем окне нажать Follow
  expected-result: |
    У иконки скрещенных мечей появился значок отслеживания

- summary: |
    Проверка отмены отслеживания пользователя
  requirement: |
    Пользователь может отслеживать активность другого пользователя
  prerequisites: |
    Пользователь отслеживает активность другого пользователя
  test-data: |
    нет
  steps:
    - нажать на иконку скрещенных мечей
    - нажать Unfollow
  expected-result: |
    Пользователь перестал отслеживать активность другого пользователя

- summary: |
    Проверка принятия приглашения от другого пользователя
  requirement: |
    Пользователь должен иметь возможность приглашать других пользователей в игру, принимать и отклонять приглашения других
  prerequisites: |
    Открыть два аккаунта. Создать игру и послать приглашение с одногго аккаунта на другой
  test-data: |
    нет
  steps:
    - перейти на другой аккаунт
    - нажать на скрещенные мечи
    - нажать Accept
  expected-result: |
    Пользователь присоединился к игре по приглашение от другого пользователя
